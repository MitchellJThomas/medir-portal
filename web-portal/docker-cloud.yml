nginx:
  image: mitchelljthomas/medirportal_nginx
  links:
    - letsencrypt
    - app
  environment:
    - MY_DOMAIN_NAME=www.ittysensor.com
  mem_limit: 512mb
  cpu_shares: 256
  # restart: always
  ports: 
    - "80:80"
    - "443:443"
  volumes_from:
    - letsencrypt
letsencrypt:
  image: quay.io/letsencrypt/letsencrypt:latest
  command: "certonly --standalone -d www.ittysensor.com --text --agree-tos --email ittysensor@gmail.com --rsa-key-size 4096 --verbose --renew-by-default --standalone-supported-challenges http-01"
  volumes:
    - /etc/letsencrypt
    - /var/lib/letsencrypt
  ports:
    - "80"
    - "443"
app:
  image: mitchelljthomas/medir:latest
